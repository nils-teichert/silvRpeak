% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict_silver.R
\name{predict_silver}
\alias{predict_silver}
\alias{predict_silver_all}
\title{Predict the migration of silver eels based on hydrological predictors}
\usage{
predict_silver(
  newtab,
  river_ref,
  intensity,
  weightsuse = "equal",
  new_size = NULL,
  plim = 0.5
)

predict_silver_all(
  newtab,
  river_ref,
  weightsuse = "equal",
  new_size = NULL,
  plim = 0.5
)
}
\arguments{
\item{newtab}{a data.frame object generated by the function \code{extract_hydro}.}

\item{river_ref}{a character vector specifying the names of river references used to make predictions. If \code{river_ref="all"} (default parameter), the ten river references are used in the prediction process \emph{(i.e. Aulne, Dordogne, Elorn, Loire, Meuse, Oir, Orne, Scorff, Sevre, Touques)}.}

\item{intensity}{a character specifying the migration class, should be \code{"P50"}, \code{"P75"} or \code{"P95"},}

\item{weightsuse}{a numeric vector of the same length as \code{river_ref} used for models weighting. If \code{weightsuse} is \code{"equal"} the average of predictions of models is returned. If \code{weightsuse} is \code{"log_size"} different weights are applied to predictions depending on dissimilarities in catchment sizes (see Details).}

\item{new_size}{a numeric value specifying the catchment area (kmÂ²) of the new river. Is mandatory if \code{weightsuse="log_size"},}

\item{plim}{a numeric threshold value for the hard predictions (default \code{plim = 0.5}).}
}
\value{
A data.frame with probabilities of silver eel migration according to the river hydrological conditions.
\itemize{
  \item date : the date,
  \item Q : the river discharge,
  \item bio_year : the migration season,
  \item n_models : the number of models used to make the prediction,
  \item prop : the probability of silver eel migration,
  \item mig : the hard prediction for silver eel migration.
}
}
\description{
This function uses hydrological predictors for predicting the silver eel migration based on an ensemble of generalized boosted models.
}
\details{
When \code{weightsuse} is \code{"log_size"} the predictions are weighted by the differences in log-transformed areas of catchments. The weighting formula gives twice as much importance to the most similar site as to the most different site for producing the final predictions (see Teichert et al.).
}
\examples{
# extracts hydrological predictors for the Elorn River
hydro_elorn <- extract_hydro(date = elorn_sub$date, quse = elorn_sub$Q,
Qlim_class = c(1.31,1.65,2.06,2.7,3.52,4.63,6.09,8.47,12.7,28.9))
# select river references (all without the Elorn River)
river_used <- c("Aulne", "Dordogne", "Loire", "Meuse", "Oir",
"Orne", "Scorff", "Sevre", "Touques")

# predicts the eel migration for P50 based on averaged predictions
pred_equal <- predict_silver(newtab = hydro_elorn, river_ref=river_used,
intensity="P50", weightsuse = "equal")
# predicts the eel migration for P50 based on size weighted predictions
pred_size <- predict_silver(newtab = hydro_elorn, river_ref=river_used,
intensity="P50", weightsuse = "log_size", new_size=260)

# predicts the eel migration for all classes based on size weighted predictions
pred_size_all <- predict_silver_all(newtab = hydro_elorn, river_ref=river_used,
weightsuse = "log_size", new_size=260)


# predicts the eel migration for all classes based on size weighted predictions
pred_size_all <- predict_silver_all(newtab = hydro_elorn, river_ref=river_used,
weightsuse = "log_size", new_size=260)

}
